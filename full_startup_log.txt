{"timestamp": "2025-11-23T01:38:55.701025+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[ALLOWED] NMRUSDT SELL (conf=0.46 >= 0.38) - Regime: TRENDING | Vol: NORMAL | Policy: ENFORCED", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:38:55.701127+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[BLOCKED] BLOCKED by policy: WUSDT BUY (conf=0.23) - Below min_confidence=0.38 | Regime: TRENDING | Vol: NORMAL", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:38:55.701226+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "Found 50 high-confidence signals (>= 0.38)", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:38:55.701508+00:00", "level": "INFO", "logger": "backend.services.policy_observer", "message": "[CHART] POLICY OBSERVATION | Allow=True | MinConf=0.38 (vs 0.38) | Risk=1.0% | Profile=NORMAL | Blocked=0 symbols | Note: TRENDING + NORMAL_VOL - aggressive trend following", "module": "policy_observer"}
{"timestamp": "2025-11-23T01:38:55.701590+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[CHART] Found 50 strong signals, selecting top 5 by confidence", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:38:55.701723+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[TARGET] Strong signals: HYPEUSDT=SELL(0.58,{'consensus': 'weak', 'consensus_count': 1, 'models': {'xgboost': {'action': 'HOLD', 'confidence': 0.9510042667388916, 'model': 'xgboost'}, 'lightgbm': {'action': 'SELL', 'confidence': 0.9631841778755188, 'model': 'lgbm_model'}, 'nhits': {'action': 'HOLD', 'confidence': 0.5, 'model': 'nhits_insufficient_history'}, 'patchtst': {'action': 'HOLD', 'confidence': 0.5, 'model': 'patchtst_insufficient_history'}}, 'votes': {'BUY': 0.0, 'SELL': 0.25, 'HOLD': 0.25}}), QNTUSDT=SELL(0.55,{'consensus': 'weak', 'consensus_count': 1, 'models': {'xgboost': {'action': 'HOLD', 'confidence': 0.9508872032165527, 'model': 'xgboost'}, 'lightgbm': {'action': 'SELL', 'confidence': 0.9230534434318542, 'model': 'lgbm_model'}, 'nhits': {'action': 'HOLD', 'confidence': 0.5, 'model': 'nhits_insufficient_history'}, 'patchtst': {'action': 'HOLD', 'confidence': 0.5, 'model': 'patchtst_insufficient_history'}}, 'votes': {'BUY': 0.0, 'SELL': 0.25, 'HOLD': 0.25}}), BTCUSDT=SELL(0.54,{'consensus': 'weak', 'consensus_count': 1, 'models': {'xgboost': {'action': 'HOLD', 'confidence': 0.9385323524475098, 'model': 'xgboost'}, 'lightgbm': {'action': 'SELL', 'confidence': 0.9030348062515259, 'model': 'lgbm_model'}, 'nhits': {'action': 'HOLD', 'confidence': 0.5, 'model': 'nhits_insufficient_history'}, 'patchtst': {'action': 'HOLD', 'confidence': 0.5, 'model': 'patchtst_insufficient_history'}}, 'votes': {'BUY': 0.0, 'SELL': 0.25, 'HOLD': 0.25}}), MATICUSDT=SELL(0.54,{'consensus': 'weak', 'consensus_count': 1, 'models': {'xgboost': {'action': 'HOLD', 'confidence': 0.8098936080932617, 'model': 'xgboost'}, 'lightgbm': {'action': 'SELL', 'confidence': 0.8970528841018677, 'model': 'lgbm_model'}, 'nhits': {'action': 'HOLD', 'confidence': 0.5, 'model': 'nhits_insufficient_history'}, 'patchtst': {'action': 'HOLD', 'confidence': 0.5, 'model': 'patchtst_insufficient_history'}}, 'votes': {'BUY': 0.0, 'SELL': 0.25, 'HOLD': 0.25}}), TAOUSDT=SELL(0.53,{'consensus': 'weak', 'consensus_count': 1, 'models': {'xgboost': {'action': 'HOLD', 'confidence': 0.9592887759208679, 'model': 'xgboost'}, 'lightgbm': {'action': 'SELL', 'confidence': 0.8851958513259888, 'model': 'lgbm_model'}, 'nhits': {'action': 'HOLD', 'confidence': 0.5, 'model': 'nhits_insufficient_history'}, 'patchtst': {'action': 'HOLD', 'confidence': 0.5, 'model': 'patchtst_insufficient_history'}}, 'votes': {'BUY': 0.0, 'SELL': 0.25, 'HOLD': 0.25}})", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:38:55.701798+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "ΓÜí Direct execution mode - placing orders immediately", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:38:55.701982+00:00", "level": "INFO", "logger": "backend.services.execution", "message": "Binance usdm_perp futures do not support USDC quote; using USDT", "module": "execution"}
{"timestamp": "2025-11-23T01:38:55.702035+00:00", "level": "INFO", "logger": "backend.services.execution", "message": "[TEST_TUBE] Using Binance Futures TESTNET: https://testnet.binancefuture.com", "module": "execution"}
{"timestamp": "2025-11-23T01:38:55.948489+00:00", "level": "DEBUG", "logger": "backend.api_bulletproof", "message": "Binance Futures: GET /fapi/v1/klines SUCCESS (attempt 1/3, 1.58s)", "module": "api_bulletproof"}
{"timestamp": "2025-11-23T01:38:55.986454+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[BRIEFCASE] Current positions: 0/4, available: 4", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:38:56.248565+00:00", "level": "DEBUG", "logger": "backend.api_bulletproof", "message": "Binance Futures: GET /fapi/v1/klines SUCCESS (attempt 1/3, 0.27s)", "module": "api_bulletproof"}
{"timestamp": "2025-11-23T01:38:56.286942+00:00", "level": "INFO", "logger": "backend.services.execution", "message": "[SEARCH] RAW API RESPONSE: {'feeTier': 0, 'canTrade': True, 'canDeposit': True, 'canWithdraw': True, 'feeBurn': True, 'tradeGroupId': -1, 'updateTime': 0, 'multiAssetsMargin': False, 'totalInitialMargin': '0.00000000', 'totalMaintMargin': '0.00000000', 'totalWalletBalance': '4933.85985840', 'totalUnrealizedProfit': '0.00000000', 'totalMarginBalance': '4933.85985840', 'totalPositionInitialMargin': '0.00000000', 'totalOpenOrderInitialMargin': '0.00000000', 'totalCrossWalletBalance': '4933.85985840', 'totalCrossUnPnl': '0.00", "module": "execution"}
{"timestamp": "2025-11-23T01:38:56.287104+00:00", "level": "DEBUG", "logger": "backend.services.execution", "message": "Account data: marginBalance=$4933.86, availableBalance=$4933.86, walletBalance=$4933.86", "module": "execution"}
{"timestamp": "2025-11-23T01:38:56.287154+00:00", "level": "DEBUG", "logger": "backend.services.execution", "message": "Using totalMarginBalance: $4933.86", "module": "execution"}
{"timestamp": "2025-11-23T01:38:56.287417+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[MONEY] Cash: $4933.86, Margin per trade: $1233.46 (25% of balance, max $5000.00)", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:38:56.555875+00:00", "level": "DEBUG", "logger": "backend.api_bulletproof", "message": "Binance Futures: GET /fapi/v1/klines SUCCESS (attempt 1/3, 0.26s)", "module": "api_bulletproof"}
{"timestamp": "2025-11-23T01:38:56.556577+00:00", "level": "DEBUG", "logger": "backend.api_bulletproof", "message": "Binance Futures: GET /fapi/v1/klines SUCCESS (attempt 1/3, 0.27s)", "module": "api_bulletproof"}
{"timestamp": "2025-11-23T01:38:56.841230+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "\n============================================================", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:38:56.841405+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "[CLIPBOARD] Evaluating NEW signal: HYPEUSDT SHORT", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:38:56.841436+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "============================================================", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:38:56.841514+00:00", "level": "WARNING", "logger": "backend.services.risk_management.trade_opportunity_filter", "message": "ΓÜá∩╕Å  HYPEUSDT SHORT_ALLOWED_AGAINST_TREND_HIGH_CONF: Price $31.17 above EMA200 $30.22 (103.13%), BUT confidence 57.8% >= threshold 55.0% ΓåÆ APPROVED", "module": "trade_opportunity_filter"}
{"timestamp": "2025-11-23T01:38:56.841579+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_opportunity_filter", "message": "[OK] HYPEUSDT SHORT APPROVED: Consensus=STRONG, Confidence=57.8%, Trend aligned, ATR ratio=0.37%", "module": "trade_opportunity_filter"}
{"timestamp": "2025-11-23T01:38:56.841661+00:00", "level": "INFO", "logger": "backend.services.risk_management.risk_manager", "message": "[TARGET] HYPEUSDT Orchestrator Risk Scaling:\n   Policy: NORMAL\n   Policy note: TRENDING + NORMAL_VOL - aggressive trend following\n   Base risk: 1.00%\n   Policy multiplier: 100.00%\n   Adjustments: Policy base: 100.00%", "module": "risk_manager"}
{"timestamp": "2025-11-23T01:38:56.841697+00:00", "level": "INFO", "logger": "backend.services.risk_management.risk_manager", "message": "Γä╣∩╕Å  HYPEUSDT position size $4,468.74 above maximum $1250.0, capping", "module": "risk_manager"}
{"timestamp": "2025-11-23T01:38:56.841740+00:00", "level": "INFO", "logger": "backend.services.risk_management.risk_manager", "message": "[CHART] HYPEUSDT SHORT Position Sizing:\n   Price: $31.1700, ATR: $0.1147\n   SL Distance: 0.55% ($0.1721)\n   Base Risk: 1.00%\n   [TARGET] Policy Risk Multiplier: 100.00%\n   [TARGET] Final Risk: $6.90 (0.14% of equity)\n   Size: 40.1027 units = $1250.00 notional\n   Leverage: 0.3x\n   [TARGET] Adjustments: Capped at maximum position size\n", "module": "risk_manager"}
{"timestamp": "2025-11-23T01:38:56.841846+00:00", "level": "INFO", "logger": "backend.services.risk_management.global_risk_controller", "message": "[OK] Global risk check passed for HYPEUSDT SHORT:\n   Daily DD: 0.00% / 3.00%\n   Open positions: 0 / 4\n   Exposure: $1250.00 / $4933.86\n", "module": "global_risk_controller"}
{"timestamp": "2025-11-23T01:38:56.841884+00:00", "level": "INFO", "logger": "backend.services.risk_management.exit_policy_engine", "message": "[TARGET] Exit Mode: TREND_FOLLOW - Wide stops, large TP, follow trends (Regime: TRENDING)", "module": "exit_policy_engine"}
{"timestamp": "2025-11-23T01:38:56.841915+00:00", "level": "INFO", "logger": "backend.services.risk_management.exit_policy_engine", "message": "[TARGET] HYPEUSDT SHORT Exit Levels (Mode: TREND_FOLLOW):\n   Entry: $31.1700 | ATR: $0.1147\n   SL: $31.3421 (-0.55%, 1.5x ATR)\n   TP: $30.6538 (+1.66%, 4.5x ATR)\n   R:R = 3.00 | Trail: 1.2x ATR\n   Breakeven: $31.1388\n   Partial TP: $30.8259\n   Strategy: Wide stops, large TP, follow trends", "module": "exit_policy_engine"}
{"timestamp": "2025-11-23T01:38:56.841979+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "\n============================================================\n[OK][OK][OK] TRADE APPROVED: HYPEUSDT SHORT [OK][OK][OK]\n   Quantity: 40.1027 ($1250.00)\n   Entry: $31.1700\n   SL: $31.3421 (-0.55%)\n   TP: $30.6538 (+1.66%)\n   Risk: $6.90 (0.14%)\n   R:R = 3.00\n============================================================\n", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:38:56.842033+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "[MEMO] APPROVAL LOG:\n   Symbol: HYPEUSDT SHORT\n   Consensus: STRONG\n   Confidence: 57.8%\n   Size: 40.1027 ($1250.00)\n   Risk: $6.90 (0.14%)\n   Entry: $31.1700\n   SL: $31.3421\n   TP: $30.6538\n   R:R: 3.00", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:38:56.842078+00:00", "level": "WARNING", "logger": "backend.services.event_driven_executor", "message": "[WARNING] Could not estimate costs: estimate_trade_cost() got an unexpected keyword argument 'is_maker'", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:38:56.842120+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[OK] HYPEUSDT SELL APPROVED by risk management: Quantity=40.1027 @ $31.1700, SL=$31.3421, TP=$30.6538", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:38:57.706094+00:00", "level": "DEBUG", "logger": "backend.services.event_driven_executor", "message": "[CHART] HYPEUSDT: step_size=0.01, rounded_qty=40.1", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:38:57.706287+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[CHART_UP] SELL HYPEUSDT ENTRY: Price=$31.1700, Qty=40.1000, SL=$31.3421 (0.55%), TP=$30.6538 (1.66%), R:R=3.00, ATR=0.1147, Conf=57.8%, Consensus=MODERATE", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:38:57.707586+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[TARGET] Stored Dynamic TP/SL for HYPEUSDT: Entry=$31.1700, SL=$31.3421 (--0.6%), TP=$30.6538 (+-1.7%)", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:38:58.460521+00:00", "level": "INFO", "logger": "backend.services.execution", "message": "[OK] Set 30x leverage for HYPEUSDT", "module": "execution"}
{"timestamp": "2025-11-23T01:39:00.140503+00:00", "level": "WARNING", "logger": "backend.services.execution", "message": "Failed to set margin mode for HYPEUSDT", "module": "execution"}
{"timestamp": "2025-11-23T01:39:01.285665+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&timestamp=1763861940577&signature=eff1070cf803457d1795179abc625b79d739ad1003046c51dbc3c5e5c76278d4 HTTP/1.1\" 200 None", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:01.286202+00:00", "level": "INFO", "logger": "backend.services.ai_trading_engine", "message": "[ROCKET] get_trading_signals called with 1 symbols", "module": "ai_trading_engine"}
{"timestamp": "2025-11-23T01:39:01.286308+00:00", "level": "INFO", "logger": "backend.services.ai_trading_engine", "message": "[ROCKET] Processing 1 symbols in parallel batches...", "module": "ai_trading_engine"}
{"timestamp": "2025-11-23T01:39:01.286340+00:00", "level": "INFO", "logger": "backend.services.ai_trading_engine", "message": "Processing batch 0-1/1...", "module": "ai_trading_engine"}
{"timestamp": "2025-11-23T01:39:01.292776+00:00", "level": "DEBUG", "logger": "httpcore.connection", "message": "connect_tcp.started host='testnet.binancefuture.com' port=443 local_address=None timeout=10.0 socket_options=None", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:01.293116+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[OK] Order placed: HYPEUSDT SELL - ID: 50457053", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:01.293403+00:00", "level": "INFO", "logger": "backend.services.risk_management.exit_policy_engine", "message": "[TARGET] Exit Mode: TREND_FOLLOW - Wide stops, large TP, follow trends (Regime: TRENDING)", "module": "exit_policy_engine"}
{"timestamp": "2025-11-23T01:39:01.293480+00:00", "level": "INFO", "logger": "backend.services.risk_management.exit_policy_engine", "message": "[TARGET] HYPEUSDT SHORT Exit Levels (Mode: TREND_FOLLOW):\n   Entry: $31.1700 | ATR: $0.1147\n   SL: $31.3421 (-0.55%, 1.5x ATR)\n   TP: $30.6538 (+1.66%, 4.5x ATR)\n   R:R = 3.00 | Trail: 1.2x ATR\n   Breakeven: $31.1388\n   Partial TP: $30.8259\n   Strategy: Wide stops, large TP, follow trends", "module": "exit_policy_engine"}
{"timestamp": "2025-11-23T01:39:01.293542+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "[ROCKET] Trade OPENED: 50457053\n   HYPEUSDT SHORT\n   Entry: $31.1700\n   Quantity: 40.1027\n   SL: $31.3421\n   TP: $30.6538", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:01.293592+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[MEMO] Trade registered with lifecycle manager: 50457053", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:01.293651+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[PIL] Position classified: {'symbol': 'HYPEUSDT', 'side': 'sell', 'entry_price': 31.17, 'quantity': 40.1, 'stop_loss': 31.34207142857143, 'take_profit': 30.653785714285718, 'confidence': 0.5779105067253113, 'trade_id': '50457053'}", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:01.311796+00:00", "level": "DEBUG", "logger": "httpcore.connection", "message": "connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7731a0310890>", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:01.311914+00:00", "level": "DEBUG", "logger": "httpcore.connection", "message": "start_tls.started ssl_context=<ssl.SSLContext object at 0x7731a16a2b10> server_hostname='testnet.binancefuture.com' timeout=10.0", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:01.319201+00:00", "level": "DEBUG", "logger": "httpcore.connection", "message": "start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7731a15ede50>", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:01.319432+00:00", "level": "DEBUG", "logger": "httpcore.http11", "message": "send_request_headers.started request=<Request [b'GET']>", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:01.319710+00:00", "level": "DEBUG", "logger": "httpcore.http11", "message": "send_request_headers.complete", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:01.319779+00:00", "level": "DEBUG", "logger": "httpcore.http11", "message": "send_request_body.started request=<Request [b'GET']>", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:01.319852+00:00", "level": "DEBUG", "logger": "httpcore.http11", "message": "send_request_body.complete", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:01.319894+00:00", "level": "DEBUG", "logger": "httpcore.http11", "message": "receive_response_headers.started request=<Request [b'GET']>", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:01.558496+00:00", "level": "DEBUG", "logger": "backend.api_bulletproof", "message": "Binance Futures: GET /fapi/v1/klines SUCCESS (attempt 1/3, 0.26s)", "module": "api_bulletproof"}
{"timestamp": "2025-11-23T01:39:01.829510+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "\n============================================================", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:01.829639+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "[CLIPBOARD] Evaluating NEW signal: QNTUSDT SHORT", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:01.829670+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "============================================================", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:01.829762+00:00", "level": "WARNING", "logger": "backend.services.risk_management.trade_opportunity_filter", "message": "ΓÜá∩╕Å  QNTUSDT SHORT_ALLOWED_AGAINST_TREND_HIGH_CONF: Price $76.94 above EMA200 $74.94 (102.67%), BUT confidence 55.4% >= threshold 55.0% ΓåÆ APPROVED", "module": "trade_opportunity_filter"}
{"timestamp": "2025-11-23T01:39:01.829834+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_opportunity_filter", "message": "[OK] QNTUSDT SHORT APPROVED: Consensus=STRONG, Confidence=55.4%, Trend aligned, ATR ratio=0.18%", "module": "trade_opportunity_filter"}
{"timestamp": "2025-11-23T01:39:01.829904+00:00", "level": "INFO", "logger": "backend.services.risk_management.risk_manager", "message": "[TARGET] QNTUSDT Orchestrator Risk Scaling:\n   Policy: NORMAL\n   Policy note: TRENDING + NORMAL_VOL - aggressive trend following\n   Base risk: 1.00%\n   Policy multiplier: 100.00%\n   Adjustments: Policy base: 100.00%", "module": "risk_manager"}
{"timestamp": "2025-11-23T01:39:01.829985+00:00", "level": "INFO", "logger": "backend.services.risk_management.risk_manager", "message": "Γä╣∩╕Å  QNTUSDT position size $8,902.10 above maximum $1250.0, capping", "module": "risk_manager"}
{"timestamp": "2025-11-23T01:39:01.830064+00:00", "level": "INFO", "logger": "backend.services.risk_management.risk_manager", "message": "[CHART] QNTUSDT SHORT Position Sizing:\n   Price: $76.9400, ATR: $0.1421\n   SL Distance: 0.28% ($0.2132)\n   Base Risk: 1.00%\n   [TARGET] Policy Risk Multiplier: 100.00%\n   [TARGET] Final Risk: $3.46 (0.07% of equity)\n   Size: 16.2464 units = $1250.00 notional\n   Leverage: 0.3x\n   [TARGET] Adjustments: Capped at maximum position size\n", "module": "risk_manager"}
{"timestamp": "2025-11-23T01:39:01.830188+00:00", "level": "INFO", "logger": "backend.services.risk_management.global_risk_controller", "message": "[OK] Global risk check passed for QNTUSDT SHORT:\n   Daily DD: 0.00% / 3.00%\n   Open positions: 1 / 4\n   Exposure: $2500.00 / $4933.86\n", "module": "global_risk_controller"}
{"timestamp": "2025-11-23T01:39:01.830264+00:00", "level": "INFO", "logger": "backend.services.risk_management.exit_policy_engine", "message": "[TARGET] Exit Mode: TREND_FOLLOW - Wide stops, large TP, follow trends (Regime: TRENDING)", "module": "exit_policy_engine"}
{"timestamp": "2025-11-23T01:39:01.830303+00:00", "level": "INFO", "logger": "backend.services.risk_management.exit_policy_engine", "message": "[TARGET] QNTUSDT SHORT Exit Levels (Mode: TREND_FOLLOW):\n   Entry: $76.9400 | ATR: $0.1421\n   SL: $77.1532 (-0.28%, 1.5x ATR)\n   TP: $76.3004 (+0.83%, 4.5x ATR)\n   R:R = 3.00 | Trail: 1.2x ATR\n   Breakeven: $76.8631\n   Partial TP: $76.5136\n   Strategy: Wide stops, large TP, follow trends", "module": "exit_policy_engine"}
{"timestamp": "2025-11-23T01:39:01.830366+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "\n============================================================\n[OK][OK][OK] TRADE APPROVED: QNTUSDT SHORT [OK][OK][OK]\n   Quantity: 16.2464 ($1250.00)\n   Entry: $76.9400\n   SL: $77.1532 (-0.28%)\n   TP: $76.3004 (+0.83%)\n   Risk: $3.46 (0.07%)\n   R:R = 3.00\n============================================================\n", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:01.830451+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "[MEMO] APPROVAL LOG:\n   Symbol: QNTUSDT SHORT\n   Consensus: STRONG\n   Confidence: 55.4%\n   Size: 16.2464 ($1250.00)\n   Risk: $3.46 (0.07%)\n   Entry: $76.9400\n   SL: $77.1532\n   TP: $76.3004\n   R:R: 3.00", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:01.830524+00:00", "level": "WARNING", "logger": "backend.services.event_driven_executor", "message": "[WARNING] Could not estimate costs: estimate_trade_cost() got an unexpected keyword argument 'is_maker'", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:01.830588+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[OK] QNTUSDT SELL APPROVED by risk management: Quantity=16.2464 @ $76.9400, SL=$77.1532, TP=$76.3004", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:02.049202+00:00", "level": "DEBUG", "logger": "httpcore.http11", "message": "receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Date', b'Sun, 23 Nov 2025 01:39:01 GMT'), (b'x-xss-protection', b'1; mode=block'), (b'Content-Encoding', b'gzip'), (b'Server', b'Bengine'), (b'Vary', b'Accept-Encoding'), (b'x-mbx-used-weight-1m', b'6'), (b'x-response-time', b'0ms'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, PUT, DELETE, OPTIONS'), (b'Access-Control-Allow-Credentials', b'true'), (b'Access-Control-Allow-Headers', b'*'), (b'Content-Security-Policy', b\"default-src 'self'\"), (b'cache-control', b'no-cache, no-store, must-revalidate'), (b'expires', b'0'), (b'pragma', b'no-cache'), (b'strict-transport-security', b'max-age=31536000; includeSubdomains'), (b'x-content-type-options', b'nosniff'), (b'x-frame-options', b'SAMEORIGIN'), (b'X-Cache', b'Miss from cloudfront'), (b'Via', b'1.1 74cb6ad66f88e47ae011abd64e57e7cc.cloudfront.net (CloudFront)'), (b'X-Amz-Cf-Pop', b'OSL50-P2'), (b'X-Amz-Cf-Id', b'UILQQUuxJcHT83TVGplRdIxnyaDPUPrDlSfndw1qzzlzlyLSmP-_Wg==')])", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:02.049598+00:00", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://testnet.binancefuture.com/fapi/v1/klines?symbol=HYPEUSDT&interval=1m&limit=100 \"HTTP/1.1 200 OK\"", "module": "_client"}
{"timestamp": "2025-11-23T01:39:02.049743+00:00", "level": "DEBUG", "logger": "httpcore.http11", "message": "receive_response_body.started request=<Request [b'GET']>", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:02.050056+00:00", "level": "DEBUG", "logger": "httpcore.http11", "message": "receive_response_body.complete", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:02.050175+00:00", "level": "DEBUG", "logger": "httpcore.http11", "message": "response_closed.started", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:02.050291+00:00", "level": "DEBUG", "logger": "httpcore.http11", "message": "response_closed.complete", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:02.050637+00:00", "level": "DEBUG", "logger": "httpcore.connection", "message": "close.started", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:02.050924+00:00", "level": "DEBUG", "logger": "httpcore.connection", "message": "close.complete", "module": "_trace"}
{"timestamp": "2025-11-23T01:39:02.059502+00:00", "level": "WARNING", "logger": "py.warnings", "message": "/app/ai_engine/feature_engineer.py:185: FutureWarning: DataFrame.fillna with 'method' is deprecated and will raise in a future version. Use obj.ffill() or obj.bfill() instead.\n  df = df.fillna(method='ffill').fillna(method='bfill').fillna(0)\n", "module": "warnings"}
{"timestamp": "2025-11-23T01:39:02.096093+00:00", "level": "WARNING", "logger": "py.warnings", "message": "/app/ai_engine/feature_engineer_advanced.py:322: FutureWarning: DataFrame.fillna with 'method' is deprecated and will raise in a future version. Use obj.ffill() or obj.bfill() instead.\n  df = df.fillna(method='ffill').fillna(method='bfill').fillna(0)\n", "module": "warnings"}
{"timestamp": "2025-11-23T01:39:02.104664+00:00", "level": "WARNING", "logger": "py.warnings", "message": "/usr/local/lib/python3.11/site-packages/sklearn/utils/validation.py:2749: UserWarning: X does not have valid feature names, but StandardScaler was fitted with feature names\n  warnings.warn(\n", "module": "warnings"}
{"timestamp": "2025-11-23T01:39:02.107146+00:00", "level": "WARNING", "logger": "py.warnings", "message": "/usr/local/lib/python3.11/site-packages/sklearn/utils/validation.py:2749: UserWarning: X does not have valid feature names, but StandardScaler was fitted with feature names\n  warnings.warn(\n", "module": "warnings"}
{"timestamp": "2025-11-23T01:39:02.108404+00:00", "level": "DEBUG", "logger": "ai_engine.agents.lgbm_agent", "message": "LightGBM HYPEUSDT: SELL (conf=0.96, probs=[0.96, 0.02, 0.02])", "module": "lgbm_agent"}
{"timestamp": "2025-11-23T01:39:02.108509+00:00", "level": "DEBUG", "logger": "ai_engine.agents.nhits_agent", "message": "N-HiTS HYPEUSDT: Not enough history (2/30)", "module": "nhits_agent"}
{"timestamp": "2025-11-23T01:39:02.108557+00:00", "level": "DEBUG", "logger": "ai_engine.agents.patchtst_agent", "message": "PatchTST HYPEUSDT: Not enough history (2/30)", "module": "patchtst_agent"}
{"timestamp": "2025-11-23T01:39:02.108613+00:00", "level": "INFO", "logger": "ai_engine.ensemble_manager", "message": "[SKIP] Skipping nhits - nhits_insufficient_history", "module": "ensemble_manager"}
{"timestamp": "2025-11-23T01:39:02.108664+00:00", "level": "INFO", "logger": "ai_engine.ensemble_manager", "message": "[SKIP] Skipping patchtst - patchtst_insufficient_history", "module": "ensemble_manager"}
{"timestamp": "2025-11-23T01:39:02.108792+00:00", "level": "INFO", "logger": "ai_engine.ensemble_manager", "message": "[CHART] ENSEMBLE HYPEUSDT: SELL 57.79% | XGB:HOLD/0.95 LGBM:SELL/0.96 NH:HOLD/0.50 PT:HOLD/0.50", "module": "ensemble_manager"}
{"timestamp": "2025-11-23T01:39:02.109133+00:00", "level": "INFO", "logger": "backend.services.ai_trading_engine", "message": "[TARGET] Dynamic TP/SL for HOLD: confidence=0.58 -> TP=4.8% SL=6.6% Trail=1.8% Partial=65%", "module": "ai_trading_engine"}
{"timestamp": "2025-11-23T01:39:02.109312+00:00", "level": "INFO", "logger": "backend.services.ai_trading_engine", "message": "AI signals generated for 1 symbols: BUY=0 SELL=0 HOLD=1 | conf avg=0.58 max=0.58", "module": "ai_trading_engine"}
{"timestamp": "2025-11-23T01:39:02.109601+00:00", "level": "DEBUG", "logger": "backend.services.position_monitor", "message": "Position keys for HYPEUSDT: ['symbol', 'positionSide', 'positionAmt', 'entryPrice', 'breakEvenPrice', 'markPrice', 'unRealizedProfit', 'liquidationPrice', 'isolatedMargin', 'notional', 'marginAsset', 'isolatedWallet', 'initialMargin', 'maintMargin', 'positionInitialMargin', 'openOrderInitialMargin', 'adl', 'bidNotional', 'askNotional', 'updateTime']", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:02.109822+00:00", "level": "DEBUG", "logger": "backend.services.position_monitor", "message": "[CHART] HYPEUSDT: PnL +0.22% margin, Mark $31.166679, Entry $31.169000", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:02.850825+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v1/openOrders?recvWindow=10000&timestamp=1763861942109&signature=ca5fba2322bb419aa6a561b716933f0a6c569deb4e4227cf898f34730a1c65a2 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:02.851238+00:00", "level": "WARNING", "logger": "backend.services.position_monitor", "message": "[WARNING] HYPEUSDT UNPROTECTED - setting TP/SL now...", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:02.851348+00:00", "level": "INFO", "logger": "backend.services.position_monitor", "message": "[SHIELD] Setting TP/SL for HYPEUSDT: amt=-40.1, entry=$31.169", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:02.851943+00:00", "level": "INFO", "logger": "backend.services.position_monitor", "message": "[OK] Loaded Dynamic TP/SL for HYPEUSDT: TP=4.8% SL=6.6%", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:03.144301+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v1/exchangeInfo HTTP/1.1\" 200 None", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:03.637519+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v1/exchangeInfo HTTP/1.1\" 200 None", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:03.646865+00:00", "level": "INFO", "logger": "backend.services.position_monitor", "message": "   [TARGET] Leverage 30.0x: TP 4.8% margin = 0.16% price, SL 6.6% margin = 0.22% price", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:03.647031+00:00", "level": "INFO", "logger": "backend.services.position_monitor", "message": "   TP: $31.11900000, SL: $31.23800000", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:03.647083+00:00", "level": "INFO", "logger": "backend.services.position_monitor", "message": "   Partial: 26.07, Trailing: 14.03", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:03.892001+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v1/openOrders?recvWindow=10000&symbol=HYPEUSDT&timestamp=1763861943647&signature=ba59f86dc313ef335479f065380397406f4af6998749b3cd916a6c372b9bb454 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.151351+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"POST /fapi/v1/order HTTP/1.1\" 200 None", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.151767+00:00", "level": "INFO", "logger": "backend.services.position_monitor", "message": "   [OK] TP: 26.07 @ $31.11900000", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:04.410893+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"POST /fapi/v1/order HTTP/1.1\" 400 45", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.411302+00:00", "level": "ERROR", "logger": "backend.services.position_monitor", "message": "   Γ¥î Failed to set TP/SL: APIError(code=-2007): Invalid callBack rate.", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:04.411396+00:00", "level": "INFO", "logger": "backend.services.position_monitor", "message": "[CHART] Position check: 1 total, 0 protected, 1 unprotected, 0 newly protected", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:04.656669+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v1/openOrders?recvWindow=10000&timestamp=1763861944411&signature=a769f8a0eceb885bdd7690af8f92f90723ec216d827301f1568b440e4b554f0d HTTP/1.1\" 200 None", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.666101+00:00", "level": "DEBUG", "logger": "backend.services.event_driven_executor", "message": "[CHART] QNTUSDT: step_size=0.1, rounded_qty=16.2", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:04.666259+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[CHART_UP] SELL QNTUSDT ENTRY: Price=$76.9400, Qty=16.2000, SL=$77.1532 (0.28%), TP=$76.3004 (0.83%), R:R=3.00, ATR=0.1421, Conf=55.4%, Consensus=MODERATE", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:04.666631+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[TARGET] Stored Dynamic TP/SL for QNTUSDT: Entry=$76.9400, SL=$77.1532 (--0.3%), TP=$76.3004 (+-0.8%)", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:04.680739+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "Starting new HTTPS connection (31): testnet.binancefuture.com:443", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.681769+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "Starting new HTTPS connection (32): testnet.binancefuture.com:443", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.683722+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "Starting new HTTPS connection (33): testnet.binancefuture.com:443", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.683933+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "Starting new HTTPS connection (34): testnet.binancefuture.com:443", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.684127+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "Starting new HTTPS connection (35): testnet.binancefuture.com:443", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.685436+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "Starting new HTTPS connection (36): testnet.binancefuture.com:443", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.687501+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "Starting new HTTPS connection (37): testnet.binancefuture.com:443", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.687690+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "Starting new HTTPS connection (38): testnet.binancefuture.com:443", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.688492+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "Starting new HTTPS connection (39): testnet.binancefuture.com:443", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.688641+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "Starting new HTTPS connection (40): testnet.binancefuture.com:443", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.917598+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=NEARUSDT&timestamp=1763861944672&signature=1a4b559d96b361fa790e5cf54bbc84316a1ab369069e2b72fb9974385ee82319 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.922305+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=LTCUSDT&timestamp=1763861944671&signature=c312110c43fbc463d061309387553977e0fef3198fa20eaae3f6ed0a0befbfbf HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.925994+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=XANUSDT&timestamp=1763861944679&signature=e5aac2a2db9187dd1e5a426afcc95a63a25e0e1d56f5cc7846f16e844c7a4be2 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:04.966534+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=STRKUSDT&timestamp=1763861944684&signature=432dcf54ec9c03efb84f6494371dd185eb467f06447f42072d3c9287490b83ad HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.169758+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=JCTUSDT&timestamp=1763861944918&signature=133204a81007885a2e6d892991d7108b4cd4b25e2ee7e4199ee81866bae65d11 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.215889+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=AAVEUSDT&timestamp=1763861944967&signature=af63ad33569967347e4cce40540a956db2941fbbf60f3a5b0a8784e342570912 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.389864+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=DOTUSDT&timestamp=1763861944676&signature=370a0f61f8b1cdb92afa33979dcf9d29bd5deee352c99972bd071efb63c12f77 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.392252+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=SOLUSDT&timestamp=1763861944671&signature=b7e49cc2cceabeedcc15d47afc47ea27078540c41f54d48081e37febdc0d30dd HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.398463+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=BNBUSDT&timestamp=1763861944673&signature=021a054ffeab6e7763fd3a2c7f5f168a11fe0b7c6e1cc28b505c5e414690c35f HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.401139+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=AVAXUSDT&timestamp=1763861944675&signature=114bedfb5fd009d268bc90cf91f2c84a1d503f447e72b7eb7c10c42e223635c5 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.402174+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=UNIUSDT&timestamp=1763861944674&signature=eb4cb441e7dd7280dfaeff7e828add5599883e64d47863f8a3ede3693982714b HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.408646+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=ADAUSDT&timestamp=1763861944677&signature=56834ac26b8beaff105981350e7fcb1b04eb3ab3a5047af2ca1511bd55237a8c HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.409132+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=LINKUSDT&timestamp=1763861944677&signature=b5872156aaa2619f08b4795a00ece769f3d2fd78de21500bd8c9b27433a94ea9 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.417551+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=PAXGUSDT&timestamp=1763861945170&signature=0fc6ec6c31fedc49da5b1adba94a4a82ba33e1752c2b166eed30dc5d9fe24e8c HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.435594+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=DUSKUSDT&timestamp=1763861944682&signature=b8cdc84b103667387c5a2d72799c199360332228e8257a85add60151a93e5d47 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.440026+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=METUSDT&timestamp=1763861944683&signature=69cf3455bd30cf61ffe92857e748a94c22fb2560088a06610052decd5ef81c7e HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.440829+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=XPLUSDT&timestamp=1763861944681&signature=657a0ad8b56a3d1da4cd900fdb88b34fc52e656bd8ed0f9767eb13d7ae359c21 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.445338+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=XRPUSDT&timestamp=1763861944679&signature=19f0adc05814e72720e4c222658b5da8c15242b410dab9ea54bbf676fcef53b3 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.449958+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=DASHUSDT&timestamp=1763861944686&signature=a816ff3e1c8a78b19968f6145c999cc418ef17d1c01ae2237135f0060a28efb5 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.450695+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=ZENUSDT&timestamp=1763861944685&signature=248d8130015a234f3c9ea07beb08c6951a8954d6a80d3410794d2926529ff14e HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.451114+00:00", "level": "WARNING", "logger": "urllib3.connectionpool", "message": "Connection pool is full, discarding connection: testnet.binancefuture.com. Connection pool size: 10", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.451342+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=PIEVERSEUSDT&timestamp=1763861944686&signature=0f5dbd4224d74043886ea487c9830a95ce191ed97998f2e3f47eb989dc1cf112 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.451550+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=TAOUSDT&timestamp=1763861944681&signature=b950e58cca534a6012614196c09c2e436bf402f41ed5fcd997c4a7c751446ebb HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.451679+00:00", "level": "WARNING", "logger": "urllib3.connectionpool", "message": "Connection pool is full, discarding connection: testnet.binancefuture.com. Connection pool size: 10", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.452688+00:00", "level": "WARNING", "logger": "urllib3.connectionpool", "message": "Connection pool is full, discarding connection: testnet.binancefuture.com. Connection pool size: 10", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.452826+00:00", "level": "WARNING", "logger": "urllib3.connectionpool", "message": "Connection pool is full, discarding connection: testnet.binancefuture.com. Connection pool size: 10", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.459239+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=BTCUSDT&timestamp=1763861945216&signature=138b2f60c021c3da29c7ac8756c51cf9a52ae2fcc4af1582cf296caf11215664 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.459531+00:00", "level": "WARNING", "logger": "urllib3.connectionpool", "message": "Connection pool is full, discarding connection: testnet.binancefuture.com. Connection pool size: 10", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.463989+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=BCHUSDT&timestamp=1763861944687&signature=2b34cbd22172b46264341f05756e75787f37f51369af9c6b226350531e5d9871 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.464327+00:00", "level": "WARNING", "logger": "urllib3.connectionpool", "message": "Connection pool is full, discarding connection: testnet.binancefuture.com. Connection pool size: 10", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.644955+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=ASTERUSDT&timestamp=1763861945392&signature=8d490b112e466b330d1e808cf7ea91f7e576275255546582835101221a8df431 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.645779+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=HYPEUSDT&timestamp=1763861945390&signature=fa2d12c8f9225307ef8371a17346dfe8a034949d256f976bb298ffff15267f64 HTTP/1.1\" 200 None", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.646127+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=TRXUSDT&timestamp=1763861944926&signature=9f5825cb3c9f2d2f25a7cf608f99db5f7fced248d783a978db5bdff9e241ce6f HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.646206+00:00", "level": "WARNING", "logger": "urllib3.connectionpool", "message": "Connection pool is full, discarding connection: testnet.binancefuture.com. Connection pool size: 10", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.647175+00:00", "level": "WARNING", "logger": "urllib3.connectionpool", "message": "Connection pool is full, discarding connection: testnet.binancefuture.com. Connection pool size: 10", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.647950+00:00", "level": "WARNING", "logger": "urllib3.connectionpool", "message": "Connection pool is full, discarding connection: testnet.binancefuture.com. Connection pool size: 10", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.649156+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&symbol=SOONUSDT&timestamp=1763861944922&signature=2b257f981f18a61b9b28517df1a756b18527eca61001a8e01262cd32a4541a82 HTTP/1.1\" 200 2", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:05.650383+00:00", "level": "WARNING", "logger": "urllib3.connectionpool", "message": "Connection pool is full, discarding connection: testnet.binancefuture.com. Connection pool size: 10", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:06.847668+00:00", "level": "WARNING", "logger": "backend.services.execution", "message": "Failed to set leverage for QNTUSDT: 400, message='Leverage 30 is not valid', url='https://testnet.binancefuture.com/fapi/v1/leverage?timestamp=1763861946502&recvWindow=5000&symbol=QNTUSDT&leverage=30&signature=1e0501151b3a286484223f3901701fadd769f0fd8686fad3cd73c7ca8a15b281'", "module": "execution"}
{"timestamp": "2025-11-23T01:39:07.585125+00:00", "level": "WARNING", "logger": "backend.services.execution", "message": "Failed to set margin mode for QNTUSDT", "module": "execution"}
{"timestamp": "2025-11-23T01:39:08.318274+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[OK] Order placed: QNTUSDT SELL - ID: 39160515", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:08.318425+00:00", "level": "INFO", "logger": "backend.services.risk_management.exit_policy_engine", "message": "[TARGET] Exit Mode: TREND_FOLLOW - Wide stops, large TP, follow trends (Regime: TRENDING)", "module": "exit_policy_engine"}
{"timestamp": "2025-11-23T01:39:08.318489+00:00", "level": "INFO", "logger": "backend.services.risk_management.exit_policy_engine", "message": "[TARGET] QNTUSDT SHORT Exit Levels (Mode: TREND_FOLLOW):\n   Entry: $76.9400 | ATR: $0.1421\n   SL: $77.1532 (-0.28%, 1.5x ATR)\n   TP: $76.3004 (+0.83%, 4.5x ATR)\n   R:R = 3.00 | Trail: 1.2x ATR\n   Breakeven: $76.8631\n   Partial TP: $76.5136\n   Strategy: Wide stops, large TP, follow trends", "module": "exit_policy_engine"}
{"timestamp": "2025-11-23T01:39:08.318557+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "[ROCKET] Trade OPENED: 39160515\n   QNTUSDT SHORT\n   Entry: $76.9400\n   Quantity: 16.2464\n   SL: $77.1532\n   TP: $76.3004", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:08.318612+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[MEMO] Trade registered with lifecycle manager: 39160515", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:08.318673+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[PIL] Position classified: {'symbol': 'QNTUSDT', 'side': 'sell', 'entry_price': 76.94, 'quantity': 16.2, 'stop_loss': 77.15321428571428, 'take_profit': 76.30035714285715, 'confidence': 0.5538320660591125, 'trade_id': '39160515'}", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:08.577437+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "\n============================================================", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:08.577570+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "[CLIPBOARD] Evaluating NEW signal: BTCUSDT SHORT", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:08.577613+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "============================================================", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:08.577667+00:00", "level": "WARNING", "logger": "backend.services.risk_management.trade_opportunity_filter", "message": "Γ¥î BTCUSDT SHORT_BLOCKED_AGAINST_TREND_LOW_CONF: Price $85650.00 above EMA200 $84872.67 (100.92%), confidence 54.2% < threshold 55.0% ΓåÆ REJECTED", "module": "trade_opportunity_filter"}
{"timestamp": "2025-11-23T01:39:08.577724+00:00", "level": "WARNING", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "Γ¥î Trade REJECTED by filter: SHORT against trend: price 100.92% above EMA200, confidence 54.2% < 55.0%", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:08.577796+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "[MEMO] REJECTION LOG:\n   Symbol: BTCUSDT SHORT\n   Reason: SHORT against trend: price 100.92% above EMA200, confidence 54.2% < 55.0%\n   Consensus: STRONG\n   Confidence: 54.2%\n   Price: $85650.0000\n   ATR: $78.3714 (0.09%)\n   EMA200: $84872.6739", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:08.577835+00:00", "level": "WARNING", "logger": "backend.services.event_driven_executor", "message": "Γ¥î BTCUSDT SELL REJECTED by risk management: Filter: SHORT against trend: price 100.92% above EMA200, confidence 54.2% < 55.0%", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:09.289456+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "\n============================================================", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:09.289574+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "[CLIPBOARD] Evaluating NEW signal: MATICUSDT SHORT", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:09.289619+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_lifecycle_manager", "message": "============================================================", "module": "trade_lifecycle_manager"}
{"timestamp": "2025-11-23T01:39:09.289660+00:00", "level": "INFO", "logger": "backend.services.risk_management.trade_opportunity_filter", "message": "[OK] MATICUSDT SHORT APPROVED: Consensus=STRONG, Confidence=53.8%, Trend aligned, ATR ratio=0.00%", "module": "trade_opportunity_filter"}
{"timestamp": "2025-11-23T01:39:09.289728+00:00", "level": "INFO", "logger": "backend.services.risk_management.risk_manager", "message": "[TARGET] MATICUSDT Orchestrator Risk Scaling:\n   Policy: NORMAL\n   Policy note: TRENDING + NORMAL_VOL - aggressive trend following\n   Base risk: 1.00%\n   Policy multiplier: 100.00%\n   Adjustments: Policy base: 100.00%", "module": "risk_manager"}
{"timestamp": "2025-11-23T01:39:09.290280+00:00", "level": "ERROR", "logger": "backend.services.event_driven_executor", "message": "Γ¥î Failed to place order for MATICUSDT: float division by zero", "module": "event_driven_executor", "exception": {"type": "ZeroDivisionError", "message": "float division by zero", "stack": "Traceback (most recent call last):\n  File \"/app/backend/services/event_driven_executor.py\", line 915, in _execute_signals_direct\n    decision = self._trade_manager.evaluate_new_signal(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/backend/services/risk_management/trade_lifecycle_manager.py\", line 204, in evaluate_new_signal\n    position_size = self.risk_manager.calculate_position_size(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/backend/services/risk_management/risk_manager.py\", line 159, in calculate_position_size\n    notional_usd = risk_usd / sl_distance_pct\n                   ~~~~~~~~~^~~~~~~~~~~~~~~~~\nZeroDivisionError: float division by zero"}}
{"timestamp": "2025-11-23T01:39:09.303967+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[SEARCH] Execution result: {'status': 'ok', 'orders_planned': 4, 'orders_submitted': 2, 'orders_skipped': 1, 'orders_failed': 1}", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:09.304103+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "[OK] Execution complete: planned=4 submitted=2 skipped=1 failed=1", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:09.305212+00:00", "level": "INFO", "logger": "backend.services.event_driven_executor", "message": "Check complete, sleeping 10 seconds", "module": "event_driven_executor"}
{"timestamp": "2025-11-23T01:39:11.381335+00:00", "level": "ERROR", "logger": "backend.main", "message": "Unhandled application error", "module": "main", "exception": {"type": "AttributeError", "message": "'types.SimpleNamespace' object has no attribute 'kucoin_api_key'", "stack": "  + Exception Group Traceback (most recent call last):\n  |   File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 79, in collapse_excgroups\n  |     yield\n  |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 192, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 781, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"/usr/local/lib/python3.11/contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/app/backend/utils/logging_config.py\", line 108, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 85, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"/usr/local/lib/python3.11/contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/app/backend/utils/telemetry.py\", line 109, in _prometheus_http_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    |     await route.handle(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    |     await self.app(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 125, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 111, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 391, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in run_endpoint_function\n    |     return await run_in_threadpool(dependant.call, **values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    |     return await anyio.to_thread.run_sync(func)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/anyio/to_thread.py\", line 56, in run_sync\n    |     return await get_async_backend().run_sync_in_worker_thread(\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    |     return await future\n    |            ^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 976, in run\n    |     result = context.run(func, *args)\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/app/backend/routes/health.py\", line 18, in health_check\n    |     \"kucoin\": bool(cfg.kucoin_api_key and cfg.kucoin_api_secret),\n    |                    ^^^^^^^^^^^^^^^^^^\n    | AttributeError: 'types.SimpleNamespace' object has no attribute 'kucoin_api_key'\n    +------------------------------------\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"/usr/local/lib/python3.11/contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/backend/utils/logging_config.py\", line 108, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 85, in __call__\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"/usr/local/lib/python3.11/contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/backend/utils/telemetry.py\", line 109, in _prometheus_http_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 125, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 111, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 391, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/anyio/to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/backend/routes/health.py\", line 18, in health_check\n    \"kucoin\": bool(cfg.kucoin_api_key and cfg.kucoin_api_secret),\n                   ^^^^^^^^^^^^^^^^^^\nAttributeError: 'types.SimpleNamespace' object has no attribute 'kucoin_api_key'"}}
{"timestamp": "2025-11-23T01:39:11.400524+00:00", "level": "INFO", "logger": "uvicorn.access", "message": "172.19.0.1:49910 - \"GET /health HTTP/1.1\" 500", "module": "h11_impl"}
{"timestamp": "2025-11-23T01:39:11.401339+00:00", "level": "ERROR", "logger": "uvicorn.error", "message": "Exception in ASGI application\n", "module": "h11_impl", "exception": {"type": "AttributeError", "message": "'types.SimpleNamespace' object has no attribute 'kucoin_api_key'", "stack": "  + Exception Group Traceback (most recent call last):\n  |   File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 79, in collapse_excgroups\n  |     yield\n  |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 192, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 781, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py\", line 403, in run_asgi\n    |     result = await app(  # type: ignore[func-returns-value]\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py\", line 60, in __call__\n    |     return await self.app(scope, receive, send)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/applications.py\", line 1134, in __call__\n    |     await super().__call__(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/applications.py\", line 107, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 186, in __call__\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"/usr/local/lib/python3.11/contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/app/backend/utils/logging_config.py\", line 108, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 85, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"/usr/local/lib/python3.11/contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/app/backend/utils/telemetry.py\", line 109, in _prometheus_http_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    |     await route.handle(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    |     await self.app(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 125, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 111, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 391, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in run_endpoint_function\n    |     return await run_in_threadpool(dependant.call, **values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    |     return await anyio.to_thread.run_sync(func)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/anyio/to_thread.py\", line 56, in run_sync\n    |     return await get_async_backend().run_sync_in_worker_thread(\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    |     return await future\n    |            ^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 976, in run\n    |     result = context.run(func, *args)\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/app/backend/routes/health.py\", line 18, in health_check\n    |     \"kucoin\": bool(cfg.kucoin_api_key and cfg.kucoin_api_secret),\n    |                    ^^^^^^^^^^^^^^^^^^\n    | AttributeError: 'types.SimpleNamespace' object has no attribute 'kucoin_api_key'\n    +------------------------------------\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py\", line 403, in run_asgi\n    result = await app(  # type: ignore[func-returns-value]\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py\", line 60, in __call__\n    return await self.app(scope, receive, send)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/applications.py\", line 1134, in __call__\n    await super().__call__(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/applications.py\", line 107, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 186, in __call__\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"/usr/local/lib/python3.11/contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/backend/utils/logging_config.py\", line 108, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 85, in __call__\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"/usr/local/lib/python3.11/contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 85, in collapse_excgroups\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/backend/utils/telemetry.py\", line 109, in _prometheus_http_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 125, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 111, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 391, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/anyio/to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/backend/routes/health.py\", line 18, in health_check\n    \"kucoin\": bool(cfg.kucoin_api_key and cfg.kucoin_api_secret),\n                   ^^^^^^^^^^^^^^^^^^\nAttributeError: 'types.SimpleNamespace' object has no attribute 'kucoin_api_key'"}}
{"timestamp": "2025-11-23T01:39:15.380949+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v3/positionRisk?recvWindow=10000&timestamp=1763861954658&signature=32e4f2d3aa2ff6075f8c93e437223e36ebb08a16295de14a8455ec990ec9933a HTTP/1.1\" 200 None", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:15.381648+00:00", "level": "ERROR", "logger": "backend.services.position_monitor", "message": "[ALERT] EMERGENCY: HYPEUSDT losing -8.83% - SL FAILED! Force closing...", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:15.628295+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v1/openOrders?recvWindow=10000&symbol=HYPEUSDT&timestamp=1763861955381&signature=e2ca18c7bb8e58f11e418df92e0587eb6f123dcf0bd7f6f930833ad64646a93a HTTP/1.1\" 200 None", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:15.629126+00:00", "level": "INFO", "logger": "backend.services.position_monitor", "message": "≡ƒùæ∩╕Å  Cancelling 1 open orders for HYPEUSDT", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:16.366777+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"DELETE /fapi/v1/order HTTP/1.1\" 200 None", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:16.367482+00:00", "level": "INFO", "logger": "backend.services.position_monitor", "message": "   Γ£ô Cancelled TAKE_PROFIT_MARKET order 50457085", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:16.367613+00:00", "level": "INFO", "logger": "backend.services.position_monitor", "message": "[OK] Cancelled 1/1 orders for HYPEUSDT", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:16.627615+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"POST /fapi/v1/order HTTP/1.1\" 200 None", "module": "connectionpool"}
{"timestamp": "2025-11-23T01:39:16.628201+00:00", "level": "ERROR", "logger": "backend.services.position_monitor", "message": "[OK] EMERGENCY CLOSE: HYPEUSDT closed at $31.260694 (loss: -8.83%)", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:16.628275+00:00", "level": "ERROR", "logger": "backend.services.position_monitor", "message": "[ALERT] EMERGENCY: QNTUSDT losing -10.96% - SL FAILED! Force closing...", "module": "position_monitor"}
{"timestamp": "2025-11-23T01:39:16.875929+00:00", "level": "DEBUG", "logger": "urllib3.connectionpool", "message": "https://testnet.binancefuture.com:443 \"GET /fapi/v1/openOrders?recvWindow=10000&symbol=QNTUSDT&timestamp=1763861956628&signature=1e9bc10512409ba8877f5436af14bd33eb14ad80a8efb783762bca2f86bca2cb HTTP/1.1\" 200 2", "module": "connectionpool"}
