#!/usr/bin/env python3
"""Display current TP/SL and trailing stop configuration."""
import os
from dotenv import load_dotenv

load_dotenv()

print("\n" + "=" * 70)
print("üéØ CURRENT TP/SL & TRAILING STOP CONFIGURATION")
print("=" * 70)

# Read from .env
tp_pct = float(os.getenv('QT_TP_PCT', '0.04'))
sl_pct = float(os.getenv('QT_SL_PCT', '0.03'))
trail_pct = float(os.getenv('QT_TRAIL_PCT', '0.02'))
partial_tp = float(os.getenv('QT_PARTIAL_TP', '0.5'))
trailing_enabled = os.getenv('QT_TRAILING_STOP_ENABLED', 'true').lower() == 'true'
trailing_interval = int(os.getenv('QT_TRAILING_CHECK_INTERVAL', '10'))
trailing_min_profit = float(os.getenv('QT_TRAILING_MIN_PROFIT', '0.005'))

print("\nüìà TAKE PROFIT (TP):")
print(f"   Target: {tp_pct * 100:.1f}% gain")
print(f"   P√• $800 posisjon: ${800 * tp_pct:.2f} profit per trade")
print(f"   Partial Exit: {partial_tp * 100:.0f}% av posisjon ved TP")
print(f"   ‚Üí Lukker {partial_tp * 100:.0f}% ved +{tp_pct * 100:.1f}%, resten f√•r trailing stop")

print("\nüìâ STOP LOSS (SL):")
print(f"   Max Loss: {sl_pct * 100:.1f}% drawdown")
print(f"   P√• $800 posisjon: -${800 * sl_pct:.2f} max tap per trade")
print(f"   ‚Üí Hard stop triggers automatisk ved -{sl_pct * 100:.1f}%")

print("\nüéØ TRAILING STOP:")
print(f"   Status: {'‚úÖ ENABLED' if trailing_enabled else '‚ùå DISABLED'}")
print(f"   Trail Distance: {trail_pct * 100:.1f}% fra peak")
print(f"   Check Interval: {trailing_interval}s")
print(f"   Min Profit to Activate: {trailing_min_profit * 100:.2f}%")
print(f"   ‚Üí F√∏lger prisen opp, stopper ved {trail_pct * 100:.1f}% fall fra topp")

print("\nüí° HYBRID STRATEGI:")
print(f"   1Ô∏è‚É£  Position opens: Full size ($800)")
print(f"   2Ô∏è‚É£  Price hits +{tp_pct * 100:.1f}%: Sell {partial_tp * 100:.0f}% ‚Üí Lock profit ${800 * partial_tp * tp_pct:.2f}")
print(f"   3Ô∏è‚É£  Remaining {(1-partial_tp) * 100:.0f}%: Trailing stop {trail_pct * 100:.1f}% ‚Üí Let winners run!")
print(f"   4Ô∏è‚É£  If price drops -{sl_pct * 100:.1f}%: Full stop loss ‚Üí Max loss -${800 * sl_pct:.2f}")

print("\nüé≤ EXAMPLE SCENARIOS:")
print(f"\n   Scenario A - Quick Win:")
print(f"   ‚Ä¢ Entry: $1.00, Size: $800")
print(f"   ‚Ä¢ Price ‚Üí $1.04 (+{tp_pct * 100:.1f}%)")
print(f"   ‚Ä¢ Action: Sell {partial_tp * 100:.0f}% = ${800 * partial_tp * tp_pct:.2f} profit")
print(f"   ‚Ä¢ Remaining {(1-partial_tp) * 100:.0f}%: Continue with trailing stop")

print(f"\n   Scenario B - Runner:")
print(f"   ‚Ä¢ After partial exit at +{tp_pct * 100:.1f}%")
print(f"   ‚Ä¢ Price continues to $1.10 (+10%)")
print(f"   ‚Ä¢ Trailing stop: Protects at $1.078 (1.10 - {trail_pct * 100:.1f}%)")
print(f"   ‚Ä¢ Total profit if triggered: ${800 * partial_tp * tp_pct + 400 * 0.078:.2f}")

print(f"\n   Scenario C - Stop Loss:")
print(f"   ‚Ä¢ Entry: $1.00, Size: $800")
print(f"   ‚Ä¢ Price ‚Üí $0.97 (-{sl_pct * 100:.1f}%)")
print(f"   ‚Ä¢ Action: Full position closed ‚Üí Loss: -${800 * sl_pct:.2f}")

print("\n" + "=" * 70)
print("‚öôÔ∏è  CONFIG FILES: .env + docker-compose.yml")
print("ü§ñ AI Confidence: 70%+ only (strict quality mode)")
print("=" * 70 + "\n")
