# P3 Apply Layer Configuration

# Mode: dry_run (P3.0) or testnet (P3.1)
APPLY_MODE=dry_run

# Symbols to monitor (from harvest proposals)
SYMBOLS=BTCUSDT,ETHUSDT,SOLUSDT

# Allowlist: only these symbols can be executed
# Default: BTCUSDT only (conservative start)
APPLY_ALLOWLIST=BTCUSDT

# Poll interval (seconds)
APPLY_POLL_SEC=5

# Idempotency: dedupe key TTL (seconds)
# Default: 6 hours (21600s)
APPLY_DEDUPE_TTL_SEC=21600

# Safety gates: kill score thresholds
# If kill_score >= K_BLOCK_CRITICAL: block all actions
# If kill_score >= K_BLOCK_WARNING: allow only CLOSE/tighten, block risk increase
K_BLOCK_CRITICAL=0.80
K_BLOCK_WARNING=0.60

# Emergency stop: if true, block all executions
APPLY_KILL_SWITCH=false

# Logging
APPLY_LOG_LEVEL=INFO

# Prometheus metrics port
APPLY_METRICS_PORT=8043

# Redis connection
REDIS_HOST=localhost
REDIS_PORT=6379

# Binance Testnet API (for P3.1 testnet mode)
# DO NOT COMMIT REAL CREDENTIALS - use systemd EnvironmentFile or secrets manager
# BINANCE_TESTNET_API_KEY=
# BINANCE_TESTNET_API_SECRET=
