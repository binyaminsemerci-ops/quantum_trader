â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” API KEY ROTATION - QUICK REFERENCE CARD                     â”‚
â”‚ Critical Security Action Required Within 24 Hours              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“‹ FULL CHECKLIST: See SECURITY_ROTATION_CHECKLIST.md
ğŸ“– DETAILED GUIDE: See SECURITY_API_KEY_ROTATION_REQUIRED.md

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ STEP-BY-STEP EXECUTION

â”Œâ”€ STEP 1: Binance UI (YOU DO THIS) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚ URL: https://testnet.binancefuture.com/                      â”‚
â”‚                                                               â”‚
â”‚ 1. Go to: Account â†’ API Management                           â”‚
â”‚ 2. DELETE old keys: e9ZqWh...pzUPD                           â”‚
â”‚ 3. CREATE new keys:                                          â”‚
â”‚    â€¢ Label: quantum_trader_v2_jan2026                        â”‚
â”‚    â€¢ Permissions: âœ… Futures Trading only                     â”‚
â”‚    â€¢ IP Whitelist: 46.224.116.254 (if supported)             â”‚
â”‚ 4. SAVE keys in password manager (NOT in terminal)           â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ STEP 2-4: VPS Update (AUTOMATED SCRIPT) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚ # SSH to VPS                                                 â”‚
â”‚ ssh -i ~/.ssh/hetzner_fresh root@46.224.116.254              â”‚
â”‚                                                               â”‚
â”‚ # Run rotation script (it's already there: /tmp/)           â”‚
â”‚ bash /tmp/rotate_testnet_keys.sh \                           â”‚
â”‚   'YOUR_NEW_API_KEY' \                                       â”‚
â”‚   'YOUR_NEW_API_SECRET'                                      â”‚
â”‚                                                               â”‚
â”‚ # Script will:                                               â”‚
â”‚ â€¢ Backup old configs â†’ /etc/quantum/backup_TIMESTAMP/        â”‚
â”‚ â€¢ Update 4 config files in /etc/quantum/                     â”‚
â”‚ â€¢ Verify (shows key lengths only, no secrets)                â”‚
â”‚                                                               â”‚
â”‚ # Restart services                                           â”‚
â”‚ systemctl restart quantum-governor quantum-apply-layer \     â”‚
â”‚   quantum-intent-executor                                    â”‚
â”‚                                                               â”‚
â”‚ # Check status                                               â”‚
â”‚ systemctl is-active quantum-governor quantum-apply-layer     â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ STEP 5: Verify (NO SECRETS EXPOSED) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚ # Test exchange connection                                   â”‚
â”‚ cd /home/qt/quantum_trader                                   â”‚
â”‚ python3 scripts/dump_exchange_positions.py                   â”‚
â”‚                                                               â”‚
â”‚ # Expected: Position dump with no auth errors                â”‚
â”‚                                                               â”‚
â”‚ # Check Governor logs                                        â”‚
â”‚ journalctl -u quantum-governor --since "2 min ago" | tail -30â”‚
â”‚                                                               â”‚
â”‚ # Good: "Governor starting", "P2.9 gate ENABLED"             â”‚
â”‚ # Bad: "401", "-2015", "Invalid API-key"                     â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ STEP 6: Clean Repo â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚ # Pull scrubbed code                                         â”‚
â”‚ cd /home/qt/quantum_trader                                   â”‚
â”‚ git pull                                                      â”‚
â”‚                                                               â”‚
â”‚ # Verify no hardcoded secrets                                â”‚
â”‚ grep -RIn "e9ZqWh\|ZowBZE" . 2>/dev/null | grep -v ".git"    â”‚
â”‚                                                               â”‚
â”‚ # Expected: 0 results                                        â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ STEP 7: Git History Scrub (OPTIONAL) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚ # On Windows (local repo)                                    â”‚
â”‚ pip install git-filter-repo                                  â”‚
â”‚ bash scripts/scrub_git_history.sh                            â”‚
â”‚                                                               â”‚
â”‚ # Follow prompts:                                            â”‚
â”‚ â€¢ Type "yes" to confirm                                      â”‚
â”‚ â€¢ Script creates backup tag                                  â”‚
â”‚ â€¢ Rewrites history locally                                   â”‚
â”‚                                                               â”‚
â”‚ # Force push                                                 â”‚
â”‚ git push --force --all                                       â”‚
â”‚ git push --force --tags                                      â”‚
â”‚                                                               â”‚
â”‚ Alternative: Skip if keys rotated (acceptable risk)          â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš¡ QUICK TROUBLESHOOTING

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Problem: "401 Unauthorized" after rotation                    â”‚
â”‚ Fix: Verify keys copied correctly (no extra spaces)           â”‚
â”‚      Check IP whitelist on Binance includes VPS               â”‚
â”‚                                                               â”‚
â”‚ Problem: Script can't find keys                               â”‚
â”‚ Fix: export $(grep BINANCE_TESTNET /etc/quantum/governor.env)â”‚
â”‚                                                               â”‚
â”‚ Problem: Services won't start                                 â”‚
â”‚ Fix: systemctl status quantum-governor -l                     â”‚
â”‚      Check /etc/quantum/*.env syntax (no quotes/spaces)       â”‚
â”‚                                                               â”‚
â”‚ Problem: Need to rollback                                     â”‚
â”‚ Fix: ls /etc/quantum/backup_*                                 â”‚
â”‚      cp /etc/quantum/backup_TIMESTAMP/*.env /etc/quantum/     â”‚
â”‚      systemctl restart quantum-*                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ SECURITY FILES CREATED

Local Repo:
â€¢ SECURITY_API_KEY_ROTATION_REQUIRED.md (284 lines) - Full guide
â€¢ SECURITY_ROTATION_CHECKLIST.md (548 lines) - Step-by-step
â€¢ scripts/rotate_testnet_keys.sh (114 lines) - Automated rotation
â€¢ scripts/scrub_git_history.sh (109 lines) - History cleaner
â€¢ scripts/scrub_secrets.sh (45 lines) - Repo scrubber
â€¢ scripts/dump_exchange_positions.py (HARDENED) - Safe verification

VPS Ready:
â€¢ /tmp/rotate_testnet_keys.sh (deployed and executable)

Git Commits:
â€¢ bae8d387: Fund-grade guards + dump script
â€¢ 2d90a3b3: Secret scrubbing (15 files)
â€¢ 6ad784a2: Rotation guide
â€¢ bd214987: Rotation toolkit

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… READY FOR EXECUTION

Status: All tools deployed, waiting for Step 1 (Binance UI)
Timeline: Complete within 24 hours for LOW risk
Risk: MEDIUM (testnet only, no mainnet exposure)

Once Step 1 complete (new keys from Binance):
â†’ SSH to VPS
â†’ Run /tmp/rotate_testnet_keys.sh with new keys
â†’ Total time: 5-10 minutes

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¡ REMEMBER

âœ… DO: Use rotation script (it creates backups automatically)
âœ… DO: Verify with dump_exchange_positions.py (no secret exposure)
âœ… DO: Save new keys in password manager
âŒ DON'T: Paste keys in terminal history or logs
âŒ DON'T: Commit keys to repo
âŒ DON'T: Print keys in scripts or logs

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
